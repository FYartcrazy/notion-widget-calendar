<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalable Calendar</title>
    <style>
        /* --- НАСТРОЙКИ ЦВЕТОВ --- */
        :root {
            --theme-color: #035439; /* Темно-зеленый */
            --header-text: #ffffff; 
            --bg-color: #ffffff;
            --text-color: #37352f;
            --faded-text: #cccccc;
            --today-bg: #035439; 
            --today-text: #ffffff;
            --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font);
            /* Центрируем содержимое на странице */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Убираем полосы прокрутки */
            background-color: transparent;
        }

        /* Обертка для масштабирования */
        #scaler {
            transform-origin: center center; /* Масштабируем от центра */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .calendar-container {
            width: 350px; /* Фиксированная база, которую мы будем сжимать */
            background-color: var(--bg-color);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: rgba(15, 15, 15, 0.05) 0px 0px 0px 1px, rgba(15, 15, 15, 0.1) 0px 3px 6px, rgba(15, 15, 15, 0.2) 0px 9px 24px;
            display: flex;
            flex-direction: column;
            /* Запрещаем выделение текста, чтобы при кликах не мешало */
            user-select: none; 
        }

        /* --- ШАПКА --- */
        header {
            background-color: var(--theme-color);
            color: var(--header-text);
            padding: 12px 20px; 
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #month-year {
            font-weight: 600;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--header-text);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 8px;
            transition: background 0.2s;
            font-family: monospace;
        }
        
        .nav-btn:hover {
            background-color: rgba(255,255,255, 0.2);
        }

        /* --- ТЕЛО --- */
        .body-wrapper {
            padding: 15px;
            border-bottom: 6px solid var(--theme-color); 
            flex-grow: 1;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-auto-rows: 32px;
            gap: 6px;
            text-align: center;
        }

        .day-name {
            font-size: 0.75rem;
            color: var(--theme-color); 
            font-weight: 800; 
            margin-bottom: 8px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .day {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            border-radius: 8px;
            margin: 0 auto;
            cursor: default;
            color: var(--text-color);
            transition: background 0.2s;
        }

        .day.other-month {
            color: var(--faded-text);
        }

        .day:hover:not(.today):not(.other-month) {
             background-color: #f0f0f0;
        }

        .today {
            background-color: var(--today-bg);
            color: var(--today-text);
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <div id="scaler">
        <div class="calendar-container">
            <header>
                <button class="nav-btn" id="prev">&lt;</button>
                <div id="month-year"></div>
                <button class="nav-btn" id="next">&gt;</button>
            </header>
            
            <div class="body-wrapper">
                <div class="grid" id="calendar-grid"></div>
            </div>
        </div>
    </div>

    <script>
        /* === ЛОГИКА КАЛЕНДАРЯ === */
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const dayNamesShort = ["S", "M", "T", "W", "T", "F", "S"];

        let currentDate = new Date();
        let displayedDate = new Date();

        const monthYearEl = document.getElementById("month-year");
        const gridEl = document.getElementById("calendar-grid");
        const prevBtn = document.getElementById("prev");
        const nextBtn = document.getElementById("next");

        function renderCalendar() {
            const year = displayedDate.getFullYear();
            const month = displayedDate.getMonth();

            monthYearEl.innerText = `${monthNames[month]} ${year}`;
            gridEl.innerHTML = "";

            dayNamesShort.forEach(day => {
                const el = document.createElement("div");
                el.className = "day-name";
                el.innerText = day;
                gridEl.appendChild(el);
            });

            const firstDayIndex = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const prevLastDay = new Date(year, month, 0).getDate();

            for (let x = firstDayIndex; x > 0; x--) {
                const dayNum = prevLastDay - x + 1;
                const dayEl = document.createElement("div");
                dayEl.className = "day other-month";
                dayEl.innerText = dayNum;
                gridEl.appendChild(dayEl);
            }

            for (let i = 1; i <= daysInMonth; i++) {
                const dayEl = document.createElement("div");
                dayEl.className = "day";
                dayEl.innerText = i;
                
                if (i === currentDate.getDate() && 
                    month === currentDate.getMonth() && 
                    year === currentDate.getFullYear()) {
                    dayEl.classList.add("today");
                }
                gridEl.appendChild(dayEl);
            }

            const totalCellsFilled = firstDayIndex + daysInMonth;
            const cellsNeeded = 42 - totalCellsFilled;
            
            for (let j = 1; j <= cellsNeeded; j++) {
                const dayEl = document.createElement("div");
                dayEl.className = "day other-month";
                dayEl.innerText = j;
                gridEl.appendChild(dayEl);
            }
        }

        prevBtn.addEventListener("click", () => {
            displayedDate.setMonth(displayedDate.getMonth() - 1);
            renderCalendar();
        });

        nextBtn.addEventListener("click", () => {
            displayedDate.setMonth(displayedDate.getMonth() + 1);
            renderCalendar();
        });

        renderCalendar();

        /* === ЛОГИКА МАСШТАБИРОВАНИЯ (ЭТО НОВАЯ ЧАСТЬ) === */
        function autoResize() {
            const scaler = document.getElementById('scaler');
            const baseSize = 380; // Базовый размер нашего календаря + небольшой запас
            
            // Смотрим, что меньше: ширина окна или высота окна Notion
            const availableSize = Math.min(window.innerWidth, window.innerHeight);
            
            // Вычисляем масштаб
            let scale = availableSize / baseSize;
            
            // Ограничение: не увеличивать больше чем в 1 раз (чтобы не размывалось на больших экранах)
            // Но если хотите, чтобы он рос на огромных экранах, уберите эту строку:
            if (scale > 1) scale = 1; 

            // Оставляем маленький отступ (0.95), чтобы края не прилипали
            scaler.style.transform = `scale(${scale * 0.95})`;
        }

        // Запускаем при загрузке и при каждом изменении размера окна
        window.addEventListener('resize', autoResize);
        window.addEventListener('load', autoResize);
        // Запускаем сразу на всякий случай
        autoResize();
    </script>
</body>
</html>
